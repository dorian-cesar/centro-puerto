<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/menu1.css">
    <title>Formulario de Registro</title>
</head>

<body>


    <div id="form-content">
        <div class="contenedor-imagen">
            <img src="https://pb-pool.s3.amazonaws.com/RackMultipart20240228-1957-r13gag.png" alt="">
        </div>
        <div class="contenido">
            <h2 class="mt-3" style="text-align: center;">Formulario de Registro</h2>
           
            <p id="tituloSeleccionado" style="text-align: center; font-size: 12; font-weight: 900; color: black;"></p>
            <p style="text-align: center; margin: 10px; background-color: #fcc42c; color: #1b5e98; padding: 10px; border-radius: 50px; font-weight: 700;">Precio: 3000</p>
            <form id="formulario" method="post" action="">
                <div class="mb-3">
                    <label for="nacionalidad" class="form-label">Nacionalidad:</label>
                    <select id="nacionalidad" name="nacionalidad" class="form-select" required>
                        <option value="Chile">Chile</option>
                        <option value="Venezuela">Venezuela</option>
                        <option value="Argentina">Argentina</option>
                        <option value="Brasil">Brasil</option>
                        <option value="Perú">Perú</option>
                        <option value="Bolivia">Bolivia</option>
                        <option value="Colombia">Colombia</option>
                    </select>
                </div>

                <div class="mb-3">
                    <legend class="col-form-label">Tipo de documento:</legend>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="genero" id="rut1" value="Rut" required>
                        <label class="form-check-label" for="rut">Rut</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="genero" id="otro" value="Otro" required>
                        <label class="form-check-label" for="otro">Otro</label>
                    </div>
                    <div class="mb-3">
                        <input type="text" class="form-control" name="rut" id="rut" maxlength="12"
                            onkeyup="formatCliente(this)" required>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="nombre" class="form-label">Nombre:</label>
                    <input type="text" id="nombre" name="nombre" class="form-control" required>
                </div>

                <div class="mb-3">
                    <label for="apellido" class="form-label">Apellido:</label>
                    <input type="text" id="apellido" name="apellido" class="form-control" required>
                </div>

                <div class="mb-3">
                    <label for="correo" class="form-label">Correo Electrónico:</label>
                    <input type="email" id="correo" name="correo" class="form-control" required>
                </div>

                <div class="mb-3">
                    <label for="telefono" class="form-label">Teléfono:</label>
                    <input type="tel" id="telefono" name="telefono" class="form-control" required>
                </div>

                <div class="mb-3">
                    <input type="number" id="precio" name="precio" value="3000" class="form-control" hidden>

                    <div class="d-flex justify-content-between">
                        <!-- Esta clase de Bootstrap alinea los elementos a la izquierda y a la derecha -->
                        <button type="button" class="btn btn-secondary" onclick="history.back()">Volver</button>
                        <button type="submit" formmethod="get" class="btn btn-primary">Pagar</button>

                    </div>
            </form>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <script>
        $(document).ready(function () {
            $('#formulario').submit(function (event) {
                event.preventDefault(); // Evitar que el formulario se envíe

                function generarClaveAleatoria(longitud) {
                    var caracteres = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
                    var clave = '';

                    for (var i = 0; i < longitud; i++) {
                        var indice = Math.floor(Math.random() * caracteres.length);
                        clave += caracteres.charAt(indice);
                    }

                    return clave;
                }


                // Obtener los valores del formulario
                const key = generarClaveAleatoria(10);;
                const nombre = $('#nombre').val();
                const apellido = $('#apellido').val();
                const rut = $('#rut').val();
                const correo = $('#correo').val();
                const telefono = $('#telefono').val();
                const precio = $('#precio').val();



                // Guardar los valores en el localStorage
                localStorage.setItem('key', key);
                localStorage.setItem('nombre', nombre);
                localStorage.setItem('apellido', apellido);
                localStorage.setItem('rut', rut);
                localStorage.setItem('correo', correo);
                localStorage.setItem('telefono', telefono);
                localStorage.setItem('precio', precio);

                // Redirigir a la página de destino
                window.location.href = 'registro.html';
                //window.location.href = 'https://www.flow.cl/btn.php?token=ykvppsv';      //'https://www.flow.cl/btn.php?token=urbyf6n';
            });
        });

    </script>
    <script type="text/javascript">
        function formatCliente(cliente) {
            cliente.value = cliente.value.replace(/[.-]/g, '')
                .replace(/^(\d{1,2})(\d{3})(\d{3})(\w{1})$/, '$1.$2.$3-$4')
        }
    </script>
    <script>
        $(document).ready(function(){
            // Recuperar el título del localStorage
            var tituloGuardado = localStorage.getItem("tituloSeleccionado");
            if(tituloGuardado) {
                // Mostrar el título en la página
                $("#tituloSeleccionado").text(tituloGuardado);
            } else {
                // Mostrar un mensaje si no hay título guardado
                $("#tituloSeleccionado").text("No hay título seleccionado");
            }
        });
        </script>
</body>

</html>